<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
      PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.login">

	<!-- 회원가입 -->
	<insert id="signup" parameterType="loginDTO">
		<![CDATA[
			insert into account(id, pw, name, email, addr) values(#{id}, #{pw}, #{name}, #{email}, #{addr}, #{phone})
		]]>
	</insert>
	
	<!-- 로그인 -->
	<select id="login" parameterType="loginDTO" resultType="loginDTO">
		<![CDATA[
			select * from account where id = #{id} and pw = #{pw}
		]]>
	</select>
	
	<!-- 로그인 -->
	<select id="idCheck" resultType="loginDTO">
		<![CDATA[
			select id from account
		]]>
	</select>
	
	<!-- 회원정보수정 -->
	<select id="selectId" parameterType="String" resultType="loginDTO">
		<![CDATA[
			select * from account where id = #{id}
		]]>
	</select>
	
	
	<update	id="updateMember" parameterType="loginDTO">
		<![CDATA[
			update account set pw = #{pw}, name=#{name}, nickname=#{nickname}, addr=#{addr}, phone=#{phone}
		]]>
	</update>
	
	<!-- 주문내역조회 -->
	<select id="order_list" parameterType="String" resultType="loginDTO">
		<![CDATA[
			select * from order_info where order_account_id = #{id}
		]]>
	</select>
	
		<!-- 리뷰작성 내역조회 -->
	<select id="review_list" parameterType="String" resultType="loginDTO">
		<![CDATA[
			select * from review where review_userId = #{id}
		]]>
	</select>
	
		<!-- 장바구니 조회 -->
	<select id="cart_list" parameterType="String" resultType="loginDTO">
		<![CDATA[
			select * from cart where cart_userId = #{id}
		]]>
	</select>
	
	
	<insert id="insertCart" parameterType="loginDTO">
		<![CDATA[
			insert into cart values(#{cart_id}, #{cart_userId}, #{cart_productId})
		]]>
	</insert>
	
	<insert id="insertCart" parameterType="java.util.HashMap">
		<![CDATA[
			insert into order_info values(#{id}, #{cart_userId}, #{cart_productId})
		]]>
	</insert>
</mapper>